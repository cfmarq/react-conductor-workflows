!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["@projectstorm/react-diagrams-geometry"]=e():t["@projectstorm/react-diagrams-geometry"]=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;const i=n(4);class o{constructor(t,e){this.x=t,this.y=e}translate(t,e){this.x+=t,this.y+=e}clone(){return new o(this.x,this.y)}toSVG(){return this.x+" "+this.y}asMatrix(){return new i.Matrix([[this.x],[this.y],[1]])}transform(t){let e=t.mmul(this.asMatrix());this.x=e.get(0,0),this.y=e.get(1,0)}static middlePoint(t,e){return new o((e.x+t.x)/2,(e.y+t.y)/2)}static multiply(...t){let e=t[0];for(let n=1;n<t.length;n++)e=e.mmul(t[n]);return e}static scaleMatrix(t,e){return new i.Matrix([[t,0,0],[0,e,0],[0,0,1]])}static translateMatrix(t,e){return new i.Matrix([[1,0,t],[0,1,e],[0,0,1]])}static rotateMatrix(t){return new i.Matrix([[Math.cos(t),-1*Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]])}static createScaleMatrix(t,e,n){return this.multiply(o.translateMatrix(n.x,n.y),o.scaleMatrix(t,e),o.translateMatrix(-n.x,-n.y))}static createRotateMatrix(t,e){return this.multiply(o.translateMatrix(e.x,e.y),o.rotateMatrix(t),o.translateMatrix(-e.x,-e.y))}}e.Point=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;const i=n(0),o=n(5);class r{constructor(t=[]){this.points=t}serialize(){return o.map(this.points,t=>[t.x,t.y])}deserialize(t){this.points=o.map(t,t=>new i.Point(t[0],t[1]))}scale(t,e,n){let r=i.Point.createScaleMatrix(t,e,n);o.forEach(this.points,t=>{t.transform(r)})}transform(t){o.forEach(this.points,e=>{e.transform(t)})}setPoints(t){this.points=t}getPoints(){return this.points}rotate(t){this.transform(i.Point.createRotateMatrix(t/(180/Math.PI),this.getOrigin()))}translate(t,e){o.forEach(this.points,n=>{n.translate(t,e)})}doClone(t){this.points=o.map(t.points,t=>t.clone())}clone(){let t=Object.create(this);return t.doClone(this),t}getOrigin(){if(0===this.points.length)return null;let t=this.getBoundingBox();return i.Point.middlePoint(t.getTopLeft(),t.getBottomRight())}static boundingBoxFromPolygons(t){return r.boundingBoxFromPoints(o.flatMap(t,t=>t.getPoints()))}static boundingBoxFromPoints(t){if(0===t.length)return new s.Rectangle(0,0,0,0);let e=t[0].x,n=t[0].x,o=t[0].y,r=t[0].y;for(let i=1;i<t.length;i++)t[i].x<e&&(e=t[i].x),t[i].x>n&&(n=t[i].x),t[i].y<o&&(o=t[i].y),t[i].y>r&&(r=t[i].y);return new s.Rectangle(new i.Point(e,o),new i.Point(n,o),new i.Point(n,r),new i.Point(e,r))}getBoundingBox(){let t=this.points[0].x,e=this.points[0].x,n=this.points[0].y,o=this.points[0].y;for(let i=1;i<this.points.length;i++)this.points[i].x<t&&(t=this.points[i].x),this.points[i].x>e&&(e=this.points[i].x),this.points[i].y<n&&(n=this.points[i].y),this.points[i].y>o&&(o=this.points[i].y);return new s.Rectangle(new i.Point(t,n),new i.Point(e,n),new i.Point(e,o),new i.Point(t,o))}}e.Polygon=r;const s=n(2)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;const i=n(0),o=n(1);class r extends o.Polygon{constructor(t=0,e=0,n=0,o=0){t instanceof i.Point&&e instanceof i.Point&&n instanceof i.Point&&o instanceof i.Point?super([t,e,n,o]):t instanceof i.Point?super([t,new i.Point(t.x+e,t.y),new i.Point(t.x+e,t.y+n),new i.Point(t.x,t.y+n)]):super(r.pointsFromBounds(t,e,n,o))}static pointsFromBounds(t,e,n,o){return[new i.Point(t,e),new i.Point(t+n,e),new i.Point(t+n,e+o),new i.Point(t,e+o)]}updateDimensions(t,e,n,i){this.points=r.pointsFromBounds(t,e,n,i)}setPoints(t){if(4!==t.length)throw"Rectangles must always have 4 points";super.setPoints(t)}containsPoint(t){const e=this.getTopLeft(),n=this.getBottomRight();return t.x>=e.x&&t.x<=n.x&&t.y>=e.y&&t.y<=n.y}getWidth(){return Math.sqrt(Math.pow(this.getTopLeft().x-this.getTopRight().x,2)+Math.pow(this.getTopLeft().y-this.getTopRight().y,2))}getHeight(){return Math.sqrt(Math.pow(this.getBottomLeft().x-this.getTopLeft().x,2)+Math.pow(this.getBottomLeft().y-this.getTopLeft().y,2))}getTopMiddle(){return i.Point.middlePoint(this.getTopLeft(),this.getTopRight())}getBottomMiddle(){return i.Point.middlePoint(this.getBottomLeft(),this.getBottomRight())}getLeftMiddle(){return i.Point.middlePoint(this.getBottomLeft(),this.getTopLeft())}getRightMiddle(){return i.Point.middlePoint(this.getBottomRight(),this.getTopRight())}getTopLeft(){return this.points[0]}getTopRight(){return this.points[1]}getBottomRight(){return this.points[2]}getBottomLeft(){return this.points[3]}}e.Rectangle=r},function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(0),e),o(n(1),e),o(n(2),e),o(n(6),e)},function(t,e){t.exports=require("ml-matrix")},function(t,e){t.exports=require("lodash")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BezierCurve=e.BezierCurvepPoints=void 0;const i=n(0),o=n(1);var r;!function(t){t[t.SOURCE=0]="SOURCE",t[t.SOURCE_CONTROL=1]="SOURCE_CONTROL",t[t.TARGET_CONTROL=2]="TARGET_CONTROL",t[t.TARGET=3]="TARGET"}(r=e.BezierCurvepPoints||(e.BezierCurvepPoints={}));class s extends o.Polygon{constructor(){super([new i.Point(0,0),new i.Point(0,0),new i.Point(0,0),new i.Point(0,0)])}getSVGCurve(){return`M${this.getSource().toSVG()} C${this.getSourceControl().toSVG()}, ${this.getTargetControl().toSVG()}, ${this.getTarget().toSVG()}`}setPoints(t){if(4!==t.length)throw new Error("BezierCurve must have extactly 4 points");super.setPoints(t)}getSource(){return this.points[r.SOURCE]}getSourceControl(){return this.points[r.SOURCE_CONTROL]}getTargetControl(){return this.points[r.TARGET_CONTROL]}getTarget(){return this.points[r.TARGET]}setSource(t){this.points[r.SOURCE]=t}setSourceControl(t){this.points[r.SOURCE_CONTROL]=t}setTargetControl(t){this.points[r.TARGET_CONTROL]=t}setTarget(t){this.points[r.TARGET]=t}}e.BezierCurve=s}])}));
//# sourceMappingURL=index.js.map